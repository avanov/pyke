<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>Creating an Inference Engine Object</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../stylesheets/pyke.css" type="text/css" />
</head>
<body>
  <table id="page-table">
    <thead class="head">
        <tr id="header1"><th id="header" colspan="3">
            &nbsp;
        </th></tr>
        <tr id="header2">
          <th id="crumb-left"></th>
          <th id="crumb-line">
            <div id="nav">
              <ul>
                  <li><a href="../index.html">Home</a></li>
<li>&gt;</li>
<li><a href="index.html">Using Pyke</a></li>
<li>&gt;</li>
<li>Creating Engine</li>

              </ul>
            </div>
          </th>
          <th id="crumb-right"></th>
        </tr>
    </thead>

    <tbody id="body">
        <tr id="body-tr">
          <td id="left-nav">
            <div id="left-nav-div">
              
<div class="title-nav"><a href="../index.html">Home</a></div><div class="nav-branch">
<div class="normal-nav"><a href="../about_pyke/index.html">About Pyke</a></div>
<div class="normal-nav"><a href="../logic_programming/index.html">Logic Programming</a></div>
<div class="normal-nav"><a href="../knowledge_bases/index.html">Knowledge Bases</a></div>
<div class="normal-nav"><a href="../pyke_syntax/index.html">Pyke Syntax</a></div>

<div class="title-nav"><a href="index.html">Using Pyke</a></div><div class="nav-branch">
<div class="normal-nav"><a href="creating_engine.html">Creating Engine</a></div>
<div class="normal-nav"><a href="adding_facts.html">Asserting Facts</a></div>
<div class="normal-nav"><a href="proving_goals.html">Proving Goals</a></div>
</div>
<div class="normal-nav"><a href="../examples.html">Examples</a></div>
<div class="normal-nav"><a href="../PyCon2008-paper.html">PyCon 2008 Paper</a></div>
</div>

            </div>
            <div id="icons">
                <div id="project-page">
                  <a href="http://sourceforge.net/projects/pyke/">Pyke Project Page</a>
                </div>
                Please Make a Donation:<br />
                <a href="http://sourceforge.net/donate/index.php?group_id=207724">
                  <img src="http://images.sourceforge.net/images/project-support.jpg"
                       width="88" height="32" border="0"
                       alt="Support This Project" /> </a> <br /><br />
                Hosted by: <br />
                <a href="http://sourceforge.net/projects/pyke">
                  <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=207724&amp;type=14"
                       width="150" height="40"
                       alt="Get Python Knowledge Engine (PyKE) at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
            </div>
          </td>
          <td id="main-td">
            <div id="main">
                <a name="startcontent" id="startcontent"></a>
                <div class="document" id="creating-an-inference-engine-object">
<h1 class="title">Creating an Inference Engine Object</h1>
<p>The <tt class="docutils literal"><span class="pre">engine</span></tt> object is your gateway into Pyke.  Each engine object manages
multiple <a class="reference external" href="../knowledge_bases/index.html">knowledge bases</a> related to accomplishing some task.</p>
<p>You may also create multiple Pyke engines, each with it's own knowledge bases
to accomplish different disconnected tasks.</p>
<p>When you create a Pyke engine object, Pyke scans for Pyke <a class="reference external" href="../pyke_syntax/kfb_syntax.html">.kfb</a>,
<a class="reference external" href="../pyke_syntax/krb_syntax/index.html">.krb</a> and <a class="reference external" href="../pyke_syntax/kqb_syntax.html">.kqb</a> source files and compiles these into Python .py source
files.  Each time a Pyke engine object is created it checks the file
modification times of the Pyke source files to see whether they need to be
recompiled.  If you change a Pyke source file, you may create a new Pyke
engine to compile the changes and run with the new knowledge bases without
having to restart your application.</p>
<p>Pyke also lets you zip these compiled files into Python eggs and can load the
files from the egg.  By including the compiled files in your application's
distribution, you don't need to include your Pyke source files if you don't
want to.</p>
<p>Once you have a <tt class="docutils literal"><span class="pre">knowledge_engine.engine</span></tt> object; generally, all of the
functions that you need are provided directly by this object:</p>
<p>knowledge_engine.engine(*paths, **kws)</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; from pyke import knowledge_engine
&gt;&gt;&gt; import doc.examples
&gt;&gt;&gt; my_engine = knowledge_engine.engine(doc.examples)
</pre>
<p>Pyke requires that all Pyke source files be placed (either directly or
indirectly) under a Python <a class="reference external" href="http://www.python.org/doc/essays/packages.html">package</a> directory.  These packages must be
on Python's search path for modules, and all directories within each dotted
name must include an <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file.</p>
<p>Each <tt class="docutils literal"><span class="pre">paths</span></tt> argument represents a different Python package directory to
search for Pyke source files.  Each source package may be passed either
as the path to the package, the package itself, or as any module within
the package (in this case, the module name is stripped from the dotted
path to get the package).  Thus, the example above could also be written:</p>
<pre class="doctest-block">
&gt;&gt;&gt; from doc.examples import some_module
&gt;&gt;&gt; my_engine = knowledge_engine.engine(some_module)
</pre>
<p>Pyke recursively walks each package directory looking for Pyke source
files (<a class="reference external" href="../pyke_syntax/kfb_syntax.html">.kfb files</a>, <a class="reference external" href="../pyke_syntax/krb_syntax/index.html">.krb files</a>, and <a class="reference external" href="../pyke_syntax/kqb_syntax.html">.kqb files</a>).  Each source
file that it finds is compiled, if out of date, and then imported
(depending on the keyword arguments, see below).  This causes all of the
<a class="reference external" href="../knowledge_bases/rule_bases.html">rule bases</a> to be loaded and made ready to <a class="reference external" href="../using_pyke.html#setting-up-each-case">activate</a>.</p>
<p>If you change some of your Pyke source files, you can create a new engine
object to compile and reload the generated Python modules without
restarting your program.  But note that you'll need to rerun the
<tt class="docutils literal"><span class="pre">add_universal_fact</span></tt> calls that you made (outside of your <a class="reference external" href="../pyke_syntax/kfb_syntax.html">.kfb files</a>).</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">It is OK for your source package directory to be part of a zipped
<a class="reference external" href="http://peak.telecommunity.com/DevCenter/PythonEggs">Python egg file</a>.  But, in this case, Pyke can't rebuild and recompile
the source files.  It will just import the compiled files that are there
without complaining if a source file has a later modification time
than its compiled file.</p>
</div>
<p>All of the Python source files and pickle files generated from each source
package are placed, by default, in a <tt class="docutils literal"><span class="pre">compiled_krb</span></tt> package directly
subordinate to that source package.  You may specify a different
destination package for any source package by passing that source package
along with the destination package name as a 2-tuple.  The destination
package name may be specified as an absolute Python module path; or as a
relative path (with leading dots), relative to the source package.  Thus,
specifying the default destination explicitly would look like:</p>
<pre class="doctest-block">
&gt;&gt;&gt; my_engine = knowledge_engine.engine((doc.examples, '.compiled_krb'))
</pre>
<p>You may specify the same destination package for multiple source packages.</p>
<p>The last component of the destination package will be created automatically
if it does not already exist.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">You will probably want to add <tt class="docutils literal"><span class="pre">compiled_krb</span></tt> (or whatever you've
chosen to call it) to your source code repository's list of files to
ignore.</p>
</div>
<p>If you want to distribute your application without the knowledge bases,
you can use the 2-tuple notation with <tt class="docutils literal"><span class="pre">None</span></tt> as the source package.  In
this case, all of the Pyke source files must already be compiled, and Pyke
will simply load these files.</p>
<p>There are four optional keyword arguments that you may also pass to the
<tt class="docutils literal"><span class="pre">engine</span></tt> constructor:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">load_fc</span></tt> -- load forward-chaining rules</li>
<li><tt class="docutils literal"><span class="pre">load_bc</span></tt> -- load backward-chaining rules</li>
<li><tt class="docutils literal"><span class="pre">load_fb</span></tt> -- load fact bases and</li>
<li><tt class="docutils literal"><span class="pre">load_qb</span></tt> -- load question bases</li>
</ul>
<p>These parameters must be passed as keyword parameters.  They all default
to <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
</blockquote>
<!-- ADD_LINKS MARKER -->
</div>

                <!-- <div id="return-to-top">
                       <a href="#">Return to Top</a>
                     </div>
                -->
            </div>
          </td>
          <td id="right-nav">
            <div id="right-nav-div">
                <h3>More:</h3>
<div class="right-item"><a href="creating_engine.html">Creating an Inference Engine Object</a><p>How to create an inference engine object.</p>
</div>
<div class="right-item"><a href="adding_facts.html">Asserting New Facts</a><p>How to dynamically assert new <em>facts</em> from your Python program.</p>
</div>
<div class="right-item"><a href="proving_goals.html">Proving Goals</a><p>The API into Pyke to prove goals.</p>
</div>

            </div>
          </td>
        </tr>
    </tbody>

    <tfoot id="foot">
        <tr id="foot2">
          <td id="copyright" colspan="3">
            Copyright &copy; 2007-2009 Bruce Frederiksen
          </td>
        </tr>
    </tfoot>
  </table>

  <div id="last-modified">
    Page last modified
    Thu, Mar 04 2010.

  </div>

  <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ?
                    "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost +
        "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-6310805-1");
      pageTracker._trackPageview();
    } catch(err) {}
  </script>
</body>
</html>

