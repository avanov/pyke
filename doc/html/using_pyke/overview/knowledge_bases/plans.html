<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>Plans and Automatic Program Generation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../stylesheets/pyke.css" type="text/css" />
</head>
<body id="the-whole-page">
  <table id="page-table">
    <thead class="head">
        <tr id="header1"><th id="header" colspan="3">
            PyKE : Python Knowledge Engine
        </th></tr>
        <tr id="header2"><th id="crumb-line" colspan="3">
          <div id="nav">
            <ul>
                <li><a href="../../../index.html">Home</a></li>
<li>&gt;</li>
<li><a href="../../index.html">Using Pyke</a></li>
<li>&gt;</li>
<li><a href="../index.html">Overview</a></li>
<li>&gt;</li>
<li><a href="index.html">Knowledge Bases</a></li>
<li>&gt;</li>
<li>Plans</li>

            </ul>
          </div>
        </th></tr>
    </thead>
    <tbody id="body">
        <tr id="body-tr">
          <td id="left-nav">
            <div id="left-nav-div">
              <div class="nav-branch">
<br/><strong><a class="title-nav" href="../../../index.html">Home</a></strong>
<div class="nav-branch">
<br/><strong><a class="title-nav" href="../../index.html">Using Pyke</a></strong>
<div class="nav-branch">
<br/><strong><a class="title-nav" href="../index.html">Overview</a></strong>
<br/><a class="normal-nav" href="../patterns/index.html">Patterns</a>
<div class="nav-branch">
<br/><strong><a class="title-nav" href="index.html">Knowledge Bases</a></strong>
<br/><a class="normal-nav" href="rules.html">Rules</a>
<br/><a class="normal-nav" href="fact_bases.html">Fact Bases</a>
<br/><a class="normal-nav" href="rule_bases.html">Rule Bases</a>
<br/><a class="normal-nav" href="forward_chaining.html">Forward Chaining</a>
<br/><a class="normal-nav" href="backward_chaining.html">Backward Chaining</a>
<br/><a class="normal-nav" href="plans.html">Plans</a>
</div>
<br/><a class="normal-nav" href="../inferencing/index.html">Inferencing</a>
<br/><a class="normal-nav" href="../plans/index.html">Plans</a>
</div>
<br/><a class="normal-nav" href="../../rule_base_syntax/index.html">Rule Base Syntax</a>
<br/><a class="normal-nav" href="../../interfacing_to_pyke/index.html">Interfacing to Pyke</a>
</div>
<br/><a class="normal-nav" href="../../../pyke_internals/index.html">Internals</a>
</div>

            </div>
          </td>
          <td id="main-td">
            <div id="main>
                <a name="startcontent" id="startcontent"></a>
                <div class="document" id="plans-and-automatic-program-generation">
<h1 class="title">Plans and Automatic Program Generation</h1>
<p>Backward chaining rules are processed when your program asks pyke to prove
a specific <em>goal</em>.  Pyke will only use activated rule bases to do the
proof.</p>
<p>Consider this example:</p>
<pre class="literal-block">
 1  son_father:
 2      use child_parent($son, $father, (), son, father)
 3      when
 4          family.son_of($son, $father, $_)

 5  son_mother:
 6      use child_parent($son, $mother, (), son, mother)
 7      when
 8          family.son_of($son, $_, $mother)

 9  daughter_father:
10      use child_parent($daughter, $father, (), daughter, father)
11      when
12          family.daughter_of($daughter, $father, $_)

13  daughter_mother:
14      use child_parent($daughter, $mother, (), daughter, mother)
15      when
16          family.daughter_of($daughter, $_, $mother)

17  grand_parent_and_child:
18      use child_parent($grand_child, $grand_parent, (grand),
19                       $grand_child_type, $grand_parent_type)
20      when
21          child_parent($grand_child, $parent, (), $grand_child_type, $_)
22          child_parent($parent, $grand_parent, (), $_, $grand_parent_type)

23  great_grand_parent_and_child:
24      use child_parent($gg_child, $gg_parent, (great, $prefix1, *$rest_prefixes),
25                       $gg_child_type, $gg_parent_type)
26      when
27          child_parent($gg_child, $parent, (), $gg_child_type, $_)
28          child_parent($parent, $gg_parent, ($prefix1, *$rest_prefixes),
29                       $_, $gg_parent_type)
</pre>
<p>These rules draw the same conclusions as the <em>forward-chaining</em> example;
but you'll notice three differences:</p>
<ol class="arabic">
<li><p class="first">The rule's <strong>if</strong> and <strong>then</strong> parts are reversed.</p>
</li>
<li><p class="first">The rules use different keywords:
<tt class="docutils literal"><span class="pre">use</span></tt> for the <strong>then</strong> clause and <tt class="docutils literal"><span class="pre">when</span></tt> for the <strong>if</strong> clause.</p>
</li>
<li><p class="first">The facts established by backward-chaining do not have a knowledge
base name prefix.</p>
<blockquote>
<p>In this case, the knowledge base name defaults to
the rule base category of this rule base (it's root rule base name).</p>
</blockquote>
</li>
</ol>
<p>These rules are not used until you ask pyke to prove a goal.</p>
<p>The easiest way
to do this is with <tt class="docutils literal"><span class="pre">pyke.prove_1</span></tt> or <tt class="docutils literal"><span class="pre">pyke.prove_n</span></tt>.  <tt class="docutils literal"><span class="pre">prove_1</span></tt> only
returns the first proof found and then stops (or raises pyke.CanNotProve).
<tt class="docutils literal"><span class="pre">prove_n</span></tt> is a generator that generates all possible proofs (which, in
some cases, might be infinite).  In both cases, you pass a tuple of
arguments and the number of variable arguments as the last two parameters.
The total number of arguments for the goal is the sum of the length of the
arguments you pass plus the number of variable arguments that you pass.
The functions return the variable bindings for the number of variable
arguments you indicated as a tuple, along with the plan (to be discussed
later).</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; import pyke
&gt;&gt;&gt; pyke.load('examples')
&gt;&gt;&gt; pyke.assert_('family', 'son_of', ('michael', 'bruce', 'marilyn'))
&gt;&gt;&gt; pyke.assert_('family', 'son_of', ('bruce', 'thomas', 'norma'))
&gt;&gt;&gt; pyke.assert_('family', 'daughter_of', ('norma', 'allen', 'ismay'))
&gt;&gt;&gt; pyke.activate('bc_example')
&gt;&gt;&gt; for vars, no_plan in pyke.prove_n('bc_example', 'child_parent', ('michael',), 4):
...     print vars
('bruce', (), 'son', 'father')
('marilyn', (), 'son', 'mother')
('thomas', ('grand',), 'son', 'father')
('norma', ('grand',), 'son', 'mother')
('allen', ('great', 'grand'), 'son', 'father')
('ismay', ('great', 'grand'), 'son', 'mother')
</pre>
</blockquote>
<div class="displaybox">
<h3>Pages</h3>
<ul><li><a href="rules.html">Rules</a><p>Explanation of rules.</p>
</li>
<li><a href="fact_bases.html">Fact Bases</a><p>Explanation of fact bases and facts.</p>
</li>
<li><a href="rule_bases.html">Rule Bases</a><p>Explanation of rule bases, overview of .krb files and how these files
are of compiled and loaded into your python program.</p>
</li>
<li><a href="forward_chaining.html">Forward Chaining</a><p>Explanation of forward-chaining rules.</p>
</li>
<li><a href="backward_chaining.html">Backward Chaining</a><p>Explanation of backward-chaining rules.</p>
</li>
<li><a href="plans.html">Plans and Automatic Program Generation</a><p>Explanation of plans and automatic program generation.</p>
</li></ul>

</div></div>

            </div>
          </td>
          <td id="right-nav">
            <div id="right-nav-div">
                <br />
                Hosted by: <br />
                <a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=207724&amp;type=3" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>
            </div>
          </td>
        </tr>
    </tbody>
    <tfoot id="foot">
        <tr id="foot1"><td id="final-stuff" colspan="3">
            <div id="end">
                <p><a href="#startcontent">Return to Top</a><br />
                <small>Page last modified <strong>Tue Oct 30 19:23:47 2007</strong>.</small> 
                </p>
            </div>
        </td></tr>
        <tr id="foot2"><td id="copyright" colspan="3">
            Copyright &copy; 2007 Bruce Frederiksen
        </td></tr>
    </tfoot>
  </table>
</body>
</html>
